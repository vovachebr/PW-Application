(this["webpackJsonppw-application"]=this["webpackJsonppw-application"]||[]).push([[0],{242:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},26:function(e,t,n){"use strict";var a=n(301);n.o(a,"Actions")&&n.d(t,"Actions",(function(){return a.Actions}));var r=n(302);n.d(t,"Actions",(function(){return r.a}));n(303),n(304)},301:function(e,t){},302:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.APPLICATION_HTTP_MESSAGE="APPLICATION_HTTP_MESSAGE",e.REMOVE_APPLICATION_MESSAGE="REMOVE_APPLICATION_MESSAGE",e.SET_USER_INFO="SET_USER_INFO",e.LOADING_USERS="LOADING_USERS",e.LOADED_USERS="LOADED_USERS",e.LOADING_COMMIT_TRANSACTION="LOADING_COMMIT_TRANSACTION",e.UPDATE_BALANCE="UPDATE_BALANCE",e.PUSH_TRANSACTION="PUSH_TRANSACTION",e.SET_TRANSACTIONS="SET_TRANSACTIONS"}(a||(a={}))},303:function(e,t){},304:function(e,t){},352:function(e,t,n){e.exports=n(422)},418:function(e,t,n){},422:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=n(60),s=n(337),u=n(36),l=n(339),m=n(67),f=n(26),p=n(27),d={isLoadingUsersList:!1,users:[]},b={isLoadingTransaction:!1,transactionsList:[]},O=Object(i.combineReducers)({applicationErrors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.Actions.APPLICATION_HTTP_MESSAGE:return{message:t.payload};case f.Actions.REMOVE_APPLICATION_MESSAGE:return{};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.Actions.SET_USER_INFO:return Object(p.a)(Object(p.a)({},e),{},{userInfo:t.payload});case f.Actions.UPDATE_BALANCE:return Object(p.a)(Object(p.a)({},e),{},{userInfo:Object(p.a)(Object(p.a)({},e.userInfo),{},{balance:t.payload})});case f.Actions.LOADING_USERS:return Object(p.a)(Object(p.a)({},e),{},{isLoadingUsersList:t.payload});case f.Actions.LOADED_USERS:return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});default:return e}},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.Actions.LOADING_COMMIT_TRANSACTION:return Object(p.a)(Object(p.a)({},e),{},{isLoadingTransaction:t.payload});case f.Actions.SET_TRANSACTIONS:return Object(p.a)(Object(p.a)({},e),{},{transactionsList:t.payload});case f.Actions.PUSH_TRANSACTION:return Object(p.a)(Object(p.a)({},e),{},{transactionsList:e.transactionsList.concat(t.payload)});default:return e}}}),E=n(53),v=n(235),g=n(236),j=n(305),S=n(306),A=Object(v.a)({form:{width:"50%"},field:{marginBottom:"15px"}});function h(e){var t=e.onSubmit,n=A(),o=Object(a.useState)(""),c=Object(E.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)(""),l=Object(E.a)(u,2),m=l[0],f=l[1],p=Object(a.useState)(""),d=Object(E.a)(p,2),b=d[0],O=d[1],v=Object(a.useState)(""),h=Object(E.a)(v,2),T=h[0],N=h[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{className:n.form},r.a.createElement(j.a,{className:n.field,value:i,onChange:function(e){return s(e.target.value)},label:"Login",variant:"outlined"}),r.a.createElement(j.a,{className:n.field,value:m,onChange:function(e){return f(e.target.value)},label:"Email",type:"email",variant:"outlined"}),r.a.createElement(j.a,{className:n.field,value:b,onChange:function(e){return O(e.target.value)},label:"Password",type:"password",variant:"outlined"}),r.a.createElement(j.a,{className:n.field,value:T,onChange:function(e){return N(e.target.value)},label:"Confirm password",type:"password",variant:"outlined"}),r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return t(i,m,b,T)}},"sing up")))}var T=Object(v.a)({form:{width:"50%"},field:{marginBottom:"15px"}});function N(e){var t=e.onSubmit,n=T(),o=Object(a.useState)(""),c=Object(E.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)(""),l=Object(E.a)(u,2),m=l[0],f=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{className:n.form},r.a.createElement(j.a,{className:n.field,value:i,onChange:function(e){return s(e.target.value)},label:"Email",type:"email",variant:"outlined"}),r.a.createElement(j.a,{className:n.field,value:m,onChange:function(e){return f(e.target.value)},label:"Password",type:"password",variant:"outlined"}),r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return t(i,m)}},"sing in")))}var I=n(242),y=n.n(I),C=Object(v.a)({header:{backgroundColor:"#282c34",minHeight:"5vh",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",fontSize:"calc(5px + 2vmin)",color:"white"},logo:{height:"5vh"}});function x(){var e=C();return r.a.createElement("header",{className:e.header},r.a.createElement("img",{src:y.a,className:e.logo,alt:"logo"}),r.a.createElement("p",null,"PW Application"),r.a.createElement("img",{src:y.a,className:e.logo,alt:"logo"}))}var _=n(449),w=n(450),L=n(100),k=Object(v.a)({root:{display:"inline-block",width:"30%"},body:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",boxSizing:"border-box"}});function R(e){var t=e.userInfo,n=k();return r.a.createElement(_.a,{className:n.root,variant:"outlined"},r.a.createElement(w.a,{className:n.body},r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"id: ".concat(t.id)),r.a.createElement(L.a,{variant:"h5"},"Name: ".concat(t.name)),r.a.createElement(L.a,{color:"textSecondary"},"Email: ".concat(t.email)),r.a.createElement(L.a,{component:"span"},"Balance: ".concat(t.balance))))}var P=function(e){var t=e.onClick;return r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:t},"Logout")},U=n(472),D=n(307),M=n(452),B=Object(v.a)({input:{width:400,marginTop:20},controllers:{justifyContent:"center",height:"50px"},button:{width:"80%"}});function G(e){var t=e.users,n=e.isLoading,a=e.isLoadingTransaction,o=e.amountValue,c=e.recipient,i=e.onRecipientChange,s=e.onChangeAmount,u=e.onSubmit,l=B(),m=r.a.useState(!1),f=Object(E.a)(m,2),d=f[0],b=f[1];return r.a.createElement(_.a,{variant:"outlined"},r.a.createElement(w.a,null,r.a.createElement(L.a,{variant:"h5"},"Transfer money"),r.a.createElement(U.a,{className:l.input,open:d,onOpen:function(){b(!0)},onClose:function(){b(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return i(t)},options:t,loading:n,renderInput:function(e){return r.a.createElement(j.a,Object.assign({},e,{value:c,onChange:function(e){return i(e.target.value)},label:"Recipient",variant:"outlined",InputProps:Object(p.a)(Object(p.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,n?r.a.createElement(D.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}}),r.a.createElement(j.a,{className:l.input,value:String(Number(o)),onChange:function(e){return s(Number.parseFloat(e.target.value))},label:"Amount",type:"number",variant:"outlined"})),r.a.createElement(M.a,{className:l.controllers},r.a.createElement(S.a,{className:l.button,disabled:a,variant:"contained",color:"primary",onClick:u},a?r.a.createElement(D.a,{size:25}):"Transfer")))}var F=n(342),z=n.n(F),H=n(462),V=n(463),q=n(464),J=n(465),W=n(466),K=n(467),Q=n(468),X=n(469);function Y(e){var t=e.transactions,n=e.isBlockRepeat,o=e.onRepeat,c={Clear:Object(a.forwardRef)((function(e,t){return r.a.createElement(H.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return r.a.createElement(V.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(q.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(J.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(V.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(W.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return r.a.createElement(H.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return r.a.createElement(K.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return r.a.createElement(Q.a,Object.assign({},e,{ref:t}))}))},i=[{title:"Id",field:"id"},{title:"Date",field:"date"},{title:"Time",field:"time"},{title:"User",field:"username"},{title:"Amount",field:"amount"},{title:"Balance",field:"balance"},{title:"Repeat",render:function(e){return r.a.createElement(S.a,{variant:"contained",disabled:n,onClick:function(){return o(e)}},r.a.createElement(X.a,null))}}];return r.a.createElement(z.a,{title:"User transactions",icons:c,columns:i,data:t})}var Z=n(344),$=n(30),ee=n(461),te=n(470),ne=n(457),ae=Object(v.a)({form:{display:"flex",justifyContent:"center",paddingTop:"5%"}});function re(){var e=ae(),t=r.a.useState("registration"),n=Object(E.a)(t,2),a=n[0],o=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{position:"static",color:"default"},r.a.createElement(te.a,{value:a,onChange:function(e,t){return o(t)},indicatorColor:"primary",variant:"fullWidth"},r.a.createElement(ne.a,{label:"Sign in",value:"authorization"}),r.a.createElement(ne.a,{label:"Sign up",value:"registration"}))),r.a.createElement("div",{className:e.form},"authorization"===a&&r.a.createElement(Le,null),"registration"===a&&r.a.createElement(we,null)))}var oe=Object(v.a)({page:{margin:"20px 20px auto 20px"},card:{display:"flex",justifyContent:"space-between",marginBottom:"20px"}});function ce(){var e=oe();return r.a.createElement("div",{className:e.page},r.a.createElement("div",{className:e.card},r.a.createElement(ke,null),r.a.createElement(Me,null),r.a.createElement("div",null,r.a.createElement(Re,null))),r.a.createElement(Be,null))}var ie=n(62),se=n.n(ie),ue=n(99),le=n(471),me="http://193.124.114.46:3001/",fe=Object(le.a)(f.Actions.APPLICATION_HTTP_MESSAGE),pe=Object(le.a)(f.Actions.REMOVE_APPLICATION_MESSAGE),de=function(){var e=Object(ue.a)(se.a.mark((function e(t,n,a){var r,o,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)});case 2:if(!(r=e.sent).ok){e.next=10;break}return e.next=6,r.json();case 6:(o=e.sent).id_token&&(localStorage.setItem("token",o.id_token),window.location.reload()),e.next=14;break;case 10:return e.next=12,r.text();case 12:c=e.sent,a(fe({value:c,type:"error"}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),be=Object(le.a)(f.Actions.SET_USER_INFO),Oe=Object(le.a)(f.Actions.LOADING_USERS),Ee=Object(le.a)(f.Actions.LOADED_USERS),ve=Object(le.a)(f.Actions.LOADING_COMMIT_TRANSACTION),ge=Object(le.a)(f.Actions.UPDATE_BALANCE),je=Object(le.a)(f.Actions.SET_TRANSACTIONS),Se=Object(le.a)(f.Actions.PUSH_TRANSACTION),Ae=function(e,t){return function(){var n=Object(ue.a)(se.a.mark((function n(a){var r,o,c;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(ve(!0)),n.next=3,fetch(me+"api/protected/transactions",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:e,amount:t})});case 3:if(!(r=n.sent).ok){n.next=13;break}return n.next=7,r.json();case 7:o=n.sent,a(ge(o.trans_token.balance)),a(Se(o.trans_token)),a(fe({value:"Transfered successed",type:"info"})),n.next=17;break;case 13:return n.next=15,r.text();case 15:c=n.sent,a(fe({value:c,type:"error"}));case 17:a(ve(!1));case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},he=n(88),Te=Object(he.a)((function(e){return e.applicationErrors}),(function(e){return e.message})),Ne=function(e){return e.user},Ie=Object(he.a)(Ne,(function(e){return e.userInfo})),ye=Object(he.a)(Ie,(function(e){return null===e||void 0===e?void 0:e.balance})),Ce=Object(he.a)(Ne,(function(e){return e.users})),xe=Object(he.a)(Ne,(function(e){return e.isLoadingUsersList}));var _e=Object(m.b)(Object(u.b)((function(e){return{message:Te(e)}}),(function(e){return{removeApplicationMessage:function(){return e(pe())}}}))((function(e){var t=e.enqueueSnackbar,n=e.message,a=e.removeApplicationMessage,o=!!localStorage.getItem("token");return n&&setTimeout((function(){t(n.value,{variant:n.type}),a()}),0),r.a.createElement(Z.a,null,r.a.createElement($.d,null,!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.b,{path:"/login",component:re}),r.a.createElement($.a,{to:"/login"})),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.b,{path:"/home",component:ce,exact:!0}),r.a.createElement($.a,{to:"/home"}))))})));var we=Object(m.b)(Object(u.b)(null,(function(e){return{register:function(t){return e((n=t,function(e){de(me+"users",n,e)}));var n}}}))((function(e){var t=e.enqueueSnackbar,n=e.register;return r.a.createElement(h,{onSubmit:function(e,a,r,o){(function(e,n,a,r){var o=!1;return a!==r&&(o=!0,t("Passwords must be same",{variant:"error"})),""===a&&(o=!0,t("Passwords can't be empty",{variant:"error"})),/\S+@\S+\.\S+/.test(n)||(o=!0,t("Email must be valid",{variant:"error"})),e||(o=!0,t("Login can't be empty",{variant:"error"})),o})(e,a,r,o)||n({username:e,email:a,password:r})}})})));var Le=Object(m.b)(Object(u.b)(null,(function(e){return{login:function(t){return e((n=t,function(e){de(me+"sessions/create",n,e)}));var n}}}))((function(e){var t=e.enqueueSnackbar,n=e.login;return r.a.createElement(N,{onSubmit:function(e,a){(function(e,n){var a=!1;return""===n&&(a=!0,t("Passwords can't be empty",{variant:"error"})),/\S+@\S+\.\S+/.test(e)||(a=!0,t("Email must be valid",{variant:"error"})),a})(e,a)||n({email:e,password:a})}})})));var ke=Object(u.b)((function(e){return{userInfo:Ie(e)}}),(function(e){return{userInfoFetch:function(){return e(function(){var e=Object(ue.a)(se.a.mark((function e(t){var n,a,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(me+"api/protected/user-info",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json",Accept:"application/json"}});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:a=e.sent,t(be(a.user_info_token)),e.next=15;break;case 10:return e.next=12,n.text();case 12:(r=e.sent).includes("jwt expired")&&(localStorage.removeItem("token"),window.location.reload()),t(fe({value:r,type:"error"}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.userInfoFetch,n=e.userInfo;return n?r.a.createElement(R,{userInfo:n}):(t(),r.a.createElement(D.a,null))}));function Re(e){return r.a.createElement(P,{onClick:function(){localStorage.removeItem("token"),window.location.reload()}})}var Pe=function(e){return e.transactions},Ue=Object(he.a)(Pe,(function(e){return e.transactionsList})),De=Object(he.a)(Pe,(function(e){return e.isLoadingTransaction}));var Me=Object(m.b)(Object(u.b)((function(e){return{isLoadingUsersList:xe(e),users:Ce(e),userBalance:ye(e),isLoadingTransaction:De(e)}}),(function(e){return{loadUsers:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(ue.a)(se.a.mark((function t(n){var a,r,o;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Oe(!0)),t.next=3,fetch(me+"api/protected/users/list",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({filter:e})});case 3:if(!(a=t.sent).ok){t.next=11;break}return t.next=7,a.json();case 7:r=t.sent,n(Ee(r)),t.next=15;break;case 11:return t.next=13,a.text();case 13:o=t.sent,n(fe({value:o,type:"error"}));case 15:n(Oe(!1));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},commitTransaction:function(t,n){return e(Ae(t,n))}}}))((function(e){var t,n=e.loadUsers,o=e.commitTransaction,c=e.isLoadingUsersList,i=e.isLoadingTransaction,s=e.users,u=void 0===s?[]:s,l=e.userBalance,m=e.enqueueSnackbar,f=Object(a.useState)(0),p=Object(E.a)(f,2),d=p[0],b=p[1],O=Object(a.useState)(""),v=Object(E.a)(O,2),g=v[0],j=v[1];return r.a.createElement(G,{users:u,isLoading:c,isLoadingTransaction:i,amountValue:d,recipient:g,onRecipientChange:function(e){t&&clearTimeout(t),e&&(t=window.setTimeout((function(){return n(e)}),500),j(e))},onChangeAmount:function(e){return b(e||0)},onSubmit:function(){l&&l<d?m("Not enough money",{variant:"error"}):0!==d?d<0?m("Can't transfer negative amount",{variant:"error"}):g?o(g,d):m("Select user for transfer money",{variant:"error"}):m("Can't transfer zero",{variant:"error"})}})})));var Be=Object(m.b)(Object(u.b)((function(e){return{isLoadingTransaction:De(e),userBalance:ye(e),transactionsList:Ue(e)}}),(function(e){return{getTransaction:function(){return e(function(){var e=Object(ue.a)(se.a.mark((function e(t){var n,a,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ve(!0)),e.next=3,fetch(me+"api/protected/transactions",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json",Accept:"application/json"}});case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:a=e.sent,t(je(a.trans_token)),e.next=15;break;case 11:return e.next=13,n.text();case 13:r=e.sent,t(fe({value:r,type:"error"}));case 15:t(ve(!1));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},commitTransaction:function(t,n){return e(Ae(t,n))}}}))((function(e){var t=e.isLoadingTransaction,n=e.getTransaction,o=e.userBalance,c=e.transactionsList,i=e.commitTransaction,s=e.enqueueSnackbar;Object(a.useEffect)((function(){return n()}),[]);var u=c.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{date:e.date.split(",")[0],time:e.date.split(",")[1].trim()})}));return r.a.createElement(Y,{transactions:u,isBlockRepeat:t,onRepeat:function(e){var t=Math.abs(e.amount);o&&o<t?s("Not enough money",{variant:"error"}):i(e.username,t)}})}))),Ge=Object(i.createStore)(O,Object(s.composeWithDevTools)(Object(i.applyMiddleware)(l.a)));var Fe=function(){return r.a.createElement(m.a,{maxSnack:5},r.a.createElement(u.a,{store:Ge},r.a.createElement(x,null),r.a.createElement(_e,null)))};n(418);n(419).config(),c.a.render(r.a.createElement(Fe,null),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.c7618292.chunk.js.map